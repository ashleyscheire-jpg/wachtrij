<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    font-size: 40px;
    color: white;
    background: transparent;
  }
  #names {
    position: absolute;
    top: 50px;
    left: 50px;
    text-shadow: 2px 2px 4px black;
  }
</style>
</head>
<body>

<div id="names">Wachtrij wordt geladenâ€¦</div>

<script>
async function updateNames() {
  const sheetId = '1bT7pAzYvwI9Txo2iQ9BMtcJmvhIEh2TSrmPgKddkmtE'; // jouw Sheet ID
  const sheetName = 'Blad1';
  const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&sheet=${sheetName}`;

  try {
    const res = await fetch(url);
    const text = await res.text();

    let json;
    try {
      json = JSON.parse(text.substr(47).slice(0, -2));
    } catch {
      console.error("Fout bij parsen van Sheet JSON");
      document.getElementById('names').textContent = "Geen wachtrij momenteel";
      return;
    }

    // Filter alleen rijen waar status (kolom B) niet 'done' is
    const rows = (json.table.rows || [])
      .map(r => ({
        name: r.c[0]?.v,   // kolom A = naam
        status: r.c[1]?.v  // kolom B = done of leeg
      }))
      .filter(r => r.name && r.status !== 'done');

    // Toon alleen namen in overlay
    document.getElementById('names').innerHTML = rows.length ? rows.map(r => r.name).join('<br>') : "Geen wachtrij momenteel";

  } catch (e) {
    console.error('Fout bij ophalen Sheet:', e);
    document.getElementById('names').textContent = "Geen wachtrij momenteel";
  }
}

// Update elke 3 seconden
setInterval(updateNames, 3000);
updateNames();
</script>

</body>
</html>